<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>NIGHTFALL - A Collage Noir</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&family=Playfair+Display:wght@700&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: #0a0908;
            overflow: hidden;
            font-family: 'Special Elite', monospace;
            width: 100vw;
            height: 100vh;
        }

        #game {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* =============================================
           TERRY GILLIAM ANIMATION SYSTEM
           Jerky, paper-puppet movements
        ============================================= */
        @keyframes gilliam-idle {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            15% { transform: rotate(0.8deg) translateY(-2px); }
            30% { transform: rotate(-0.5deg) translateY(0); }
            45% { transform: rotate(0.3deg) translateY(-1px); }
            60% { transform: rotate(-0.8deg) translateY(1px); }
            75% { transform: rotate(0.5deg) translateY(-1px); }
        }

        @keyframes gilliam-talk {
            0% { transform: rotate(0deg) scaleY(1); }
            10% { transform: rotate(-2deg) scaleY(0.95); }
            20% { transform: rotate(2deg) scaleY(1.05); }
            30% { transform: rotate(-1deg) scaleY(0.98); }
            40% { transform: rotate(1deg) scaleY(1.02); }
            50% { transform: rotate(0deg) scaleY(1); }
            60% { transform: rotate(-1.5deg) scaleY(0.97); }
            70% { transform: rotate(1.5deg) scaleY(1.03); }
            80% { transform: rotate(-0.5deg) scaleY(0.99); }
            90% { transform: rotate(0.5deg) scaleY(1.01); }
            100% { transform: rotate(0deg) scaleY(1); }
        }

        @keyframes gilliam-walk {
            0% { transform: translateX(0) rotate(-3deg) scaleX(1); }
            25% { transform: translateX(8px) rotate(3deg) scaleX(0.95); }
            50% { transform: translateX(0) rotate(-3deg) scaleX(1); }
            75% { transform: translateX(-8px) rotate(3deg) scaleX(0.95); }
            100% { transform: translateX(0) rotate(-3deg) scaleX(1); }
        }

        @keyframes paper-hover {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-3px) rotate(0.5deg); }
            50% { transform: translateY(-1px) rotate(-0.3deg); }
            75% { transform: translateY(-4px) rotate(0.2deg); }
        }

        @keyframes neon-flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 40px currentColor; }
            20%, 24%, 55% { opacity: 0.6; text-shadow: 0 0 5px currentColor; }
        }

        @keyframes smoke-drift {
            0% { transform: translateY(0) translateX(0) scale(1); opacity: 0.6; }
            100% { transform: translateY(-80px) translateX(20px) scale(2); opacity: 0; }
        }

        /* =============================================
           COLLAGE CUTOUT BASE STYLES
        ============================================= */
        .cutout {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transform-origin: bottom center;
            filter: sepia(20%) contrast(1.1);
        }

        .cutout-photo {
            box-shadow:
                4px 4px 0 rgba(0,0,0,0.5),
                -1px -1px 0 rgba(255,250,240,0.1),
                inset 0 0 30px rgba(0,0,0,0.3);
        }

        .animate-idle { animation: gilliam-idle 4s ease-in-out infinite; }
        .animate-talk { animation: gilliam-talk 0.4s ease-in-out infinite; }
        .animate-hover { animation: paper-hover 3s ease-in-out infinite; }

        /* =============================================
           SCENE: RAINY STREET - 1959 CITY NIGHT
        ============================================= */
        #street-scene {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom,
                #0a0a12 0%,
                #12121f 30%,
                #1a1a28 60%,
                #0f0f18 100%);
            position: relative;
        }

        /* SKY - Cut from magazine astronomy photo */
        .sky-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 45%;
            background: linear-gradient(180deg, #05050a 0%, #0a0a18 50%, #151525 100%);
        }

        /* MOON - Vintage astronomy textbook cutout */
        .moon {
            position: absolute;
            top: 8%;
            right: 12%;
            width: 70px;
            height: 70px;
            background: radial-gradient(circle at 35% 35%,
                #f5f0e0 0%,
                #e8dcc8 40%,
                #c8b898 70%,
                transparent 71%);
            border-radius: 50%;
            box-shadow:
                0 0 60px rgba(255, 250, 220, 0.3),
                0 0 120px rgba(255, 250, 220, 0.15);
            animation: paper-hover 8s ease-in-out infinite;
        }

        /* CLOUDS - Torn newspaper texture */
        .cloud {
            position: absolute;
            background: linear-gradient(90deg, transparent, rgba(30,30,40,0.4), transparent);
            height: 40px;
            border-radius: 20px;
            animation: paper-hover 6s ease-in-out infinite;
        }
        .cloud-1 { top: 5%; left: 10%; width: 200px; animation-delay: -2s; }
        .cloud-2 { top: 12%; left: 50%; width: 150px; animation-delay: -4s; }
        .cloud-3 { top: 8%; left: 70%; width: 180px; }

        /* BUILDING SKYLINE - Back row silhouettes (1959 city photos) */
        .buildings-back {
            position: absolute;
            bottom: 25%;
            left: 0;
            width: 100%;
            height: 50%;
            background: #0a0a10;
            clip-path: polygon(
                0% 100%,
                0% 60%,
                5% 60%, 5% 40%, 12% 40%, 12% 55%,
                15% 55%, 15% 25%, 22% 25%, 22% 50%,
                28% 50%, 28% 35%, 32% 35%, 32% 30%, 38% 30%, 38% 45%,
                42% 45%, 42% 20%, 48% 20%, 48% 15%, 52% 15%, 52% 20%, 58% 20%, 58% 40%,
                62% 40%, 62% 55%, 68% 55%, 68% 35%, 75% 35%, 75% 45%,
                80% 45%, 80% 30%, 88% 30%, 88% 50%,
                92% 50%, 92% 40%, 100% 40%,
                100% 100%
            );
        }

        /* BUILDING WINDOWS - Lit windows scattered */
        .window-light {
            position: absolute;
            background: rgba(255, 230, 150, 0.7);
            box-shadow: 0 0 10px rgba(255, 200, 100, 0.5);
        }
        .window-light.w1 { bottom: 45%; left: 8%; width: 4px; height: 6px; }
        .window-light.w2 { bottom: 48%; left: 18%; width: 5px; height: 8px; }
        .window-light.w3 { bottom: 52%; left: 44%; width: 4px; height: 6px; }
        .window-light.w4 { bottom: 55%; left: 46%; width: 4px; height: 6px; }
        .window-light.w5 { bottom: 42%; left: 72%; width: 5px; height: 7px; }
        .window-light.w6 { bottom: 38%; left: 84%; width: 4px; height: 5px; }

        /* FRONT BUILDINGS - Storefronts (1959 commercial photos) */
        .buildings-front {
            position: absolute;
            bottom: 15%;
            left: 0;
            width: 100%;
            height: 40%;
        }

        /* Individual storefront cutouts */
        .storefront {
            position: absolute;
            bottom: 0;
            background: #12121a;
            border-top: 3px solid #1a1a25;
        }

        /* THE BAR - Left side */
        .bar-building {
            left: 5%;
            width: 25%;
            height: 100%;
            background: linear-gradient(to bottom, #18151f 0%, #12101a 100%);
        }

        .bar-door {
            position: absolute;
            bottom: 0;
            left: 35%;
            width: 30%;
            height: 45%;
            background: linear-gradient(to bottom, #1a1520 0%, #0a0810 100%);
            border: 3px solid #2a2535;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bar-door:hover {
            background: linear-gradient(to bottom, #2a2030 0%, #1a1520 100%);
            box-shadow: 0 0 30px rgba(255, 100, 100, 0.3);
        }

        .bar-window {
            position: absolute;
            bottom: 50%;
            width: 20%;
            height: 25%;
            background: rgba(180, 80, 60, 0.3);
            border: 2px solid #2a2025;
            box-shadow: inset 0 0 20px rgba(200, 100, 80, 0.3);
        }
        .bar-window.left { left: 8%; }
        .bar-window.right { right: 8%; }

        /* NEON SIGN - "BAR" */
        .neon-bar {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            font-family: sans-serif;
            font-weight: bold;
            font-size: 22px;
            color: #ff4444;
            animation: neon-flicker 3s ease-in-out infinite;
            text-shadow: 0 0 10px #ff4444, 0 0 20px #ff4444, 0 0 40px #ff2222;
        }

        /* DETECTIVE OFFICE - Center-right */
        .office-building {
            left: 55%;
            width: 20%;
            height: 90%;
            background: linear-gradient(to bottom, #1a1820 0%, #141218 100%);
        }

        .office-door {
            position: absolute;
            bottom: 0;
            left: 30%;
            width: 40%;
            height: 50%;
            background: linear-gradient(to bottom, #201820 0%, #100810 100%);
            border: 3px solid #302828;
            cursor: pointer;
            transition: all 0.3s;
        }

        .office-door:hover {
            background: linear-gradient(to bottom, #302830 0%, #201820 100%);
            box-shadow: 0 0 30px rgba(255, 200, 100, 0.3);
        }

        .office-window {
            position: absolute;
            top: 15%;
            left: 20%;
            width: 60%;
            height: 30%;
            background: rgba(255, 230, 180, 0.15);
            border: 3px solid #252020;
        }

        /* Venetian blind slats */
        .office-window::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 4px,
                rgba(0,0,0,0.6) 4px,
                rgba(0,0,0,0.6) 6px
            );
        }

        .office-sign {
            position: absolute;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Special Elite', monospace;
            font-size: 8px;
            color: #a89878;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        /* HOTEL - Far right */
        .hotel-building {
            right: 0;
            width: 18%;
            height: 110%;
            background: linear-gradient(to bottom, #151520 0%, #101018 100%);
        }

        .neon-hotel {
            position: absolute;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            font-family: sans-serif;
            font-size: 14px;
            font-weight: bold;
            color: #44aaff;
            animation: neon-flicker 4s ease-in-out infinite;
            animation-delay: -1s;
        }

        /* STREET LEVEL */
        .street {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 18%;
            background: linear-gradient(to bottom, #1a1a1a 0%, #0f0f0f 100%);
        }

        .sidewalk {
            position: absolute;
            bottom: 60%;
            left: 0;
            width: 100%;
            height: 15%;
            background: #252525;
        }

        /* WET STREET REFLECTIONS */
        .reflection {
            position: absolute;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(255,100,100,0.1), transparent);
            width: 40px;
            height: 30px;
            filter: blur(3px);
        }
        .reflection.r1 { left: 15%; background: linear-gradient(to bottom, rgba(255,100,100,0.15), transparent); }
        .reflection.r2 { left: 65%; background: linear-gradient(to bottom, rgba(255,200,100,0.1), transparent); }
        .reflection.r3 { right: 8%; background: linear-gradient(to bottom, rgba(100,150,255,0.1), transparent); }

        /* STREETLAMP - 1959 cast iron style */
        .streetlamp {
            position: absolute;
            bottom: 15%;
            left: 40%;
        }

        .lamp-post {
            width: 6px;
            height: 150px;
            background: linear-gradient(to right, #1a1a1a, #2a2a2a, #1a1a1a);
            margin: 0 auto;
        }

        .lamp-head {
            width: 40px;
            height: 30px;
            background: #1a1a1a;
            border-radius: 5px 5px 0 0;
            margin: 0 auto;
            position: relative;
        }

        .lamp-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255,240,200,0.25) 0%, transparent 70%);
            pointer-events: none;
            animation: neon-flicker 5s ease-in-out infinite;
        }

        /* PARKED CAR - 1957 Chevy cutout */
        .car {
            position: absolute;
            bottom: 3%;
            left: 60%;
            width: 160px;
            height: 55px;
            cursor: pointer;
            animation: gilliam-idle 6s ease-in-out infinite;
        }

        .car-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to bottom, #1a1520 0%, #0a0810 100%);
            border-radius: 10px 40px 5px 5px;
            clip-path: polygon(
                0% 100%, 0% 50%, 10% 30%, 30% 20%, 50% 0%, 75% 0%, 90% 20%, 100% 40%, 100% 100%
            );
        }

        .car-windows {
            position: absolute;
            bottom: 55%;
            left: 25%;
            width: 50%;
            height: 25%;
            background: rgba(40, 60, 80, 0.4);
            border-radius: 3px;
        }

        .car-wheel {
            position: absolute;
            bottom: -5px;
            width: 22px;
            height: 22px;
            background: #0a0a0a;
            border-radius: 50%;
            border: 3px solid #1a1a1a;
        }
        .car-wheel.front { right: 15%; }
        .car-wheel.back { left: 12%; }

        .car:hover {
            filter: brightness(1.2);
        }

        /* =============================================
           CHARACTERS - Paper puppet cutouts
        ============================================= */

        /* DETECTIVE - Main character */
        .detective {
            position: absolute;
            bottom: 16%;
            left: 35%;
            width: 60px;
            height: 140px;
            cursor: pointer;
            animation: gilliam-idle 4s ease-in-out infinite;
            z-index: 10;
        }

        .detective-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 75%;
            background: #0a0808;
            clip-path: polygon(
                30% 0%, 70% 0%,
                75% 10%, 80% 30%,
                95% 35%, 95% 95%,
                70% 100%, 30% 100%,
                5% 95%, 5% 35%,
                20% 30%, 25% 10%
            );
        }

        .detective-head {
            position: absolute;
            bottom: 72%;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 40px;
        }

        .detective-face {
            width: 28px;
            height: 32px;
            background: linear-gradient(to bottom, #d4b896 0%, #c4a886 100%);
            border-radius: 5px 5px 8px 8px;
            margin: 8px auto 0;
            position: relative;
        }

        .detective-hat {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 38px;
            height: 20px;
            background: #1a1515;
            border-radius: 3px 3px 0 0;
        }

        .detective-hat::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: -5px;
            width: 48px;
            height: 6px;
            background: #1a1515;
            border-radius: 2px;
        }

        /* Shadow under detective */
        .detective-shadow {
            position: absolute;
            bottom: -5px;
            left: 10%;
            width: 80%;
            height: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            filter: blur(3px);
        }

        /* FEMME FATALE - Standing by lamp */
        .femme-fatale {
            position: absolute;
            bottom: 16%;
            left: 42%;
            width: 45px;
            height: 130px;
            cursor: pointer;
            animation: gilliam-idle 5s ease-in-out infinite;
            animation-delay: -2s;
            z-index: 10;
        }

        .femme-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 78%;
            background: linear-gradient(to bottom, #2a1015 0%, #1a0810 100%);
            clip-path: polygon(
                35% 0%, 65% 0%,
                70% 15%, 72% 40%,
                65% 45%, 75% 100%,
                25% 100%, 35% 45%,
                28% 40%, 30% 15%
            );
        }

        .femme-head {
            position: absolute;
            bottom: 75%;
            left: 50%;
            transform: translateX(-50%);
            width: 28px;
            height: 35px;
        }

        .femme-face {
            width: 22px;
            height: 26px;
            background: linear-gradient(to bottom, #e8d4c0 0%, #d4c0a8 100%);
            border-radius: 4px 4px 6px 6px;
            margin: 0 auto;
            position: relative;
        }

        .femme-hair {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 25px;
            background: #1a0a05;
            border-radius: 50% 50% 30% 30%;
        }

        /* Cigarette with smoke */
        .cigarette {
            position: absolute;
            bottom: 60%;
            right: -15px;
            width: 20px;
            height: 3px;
            background: linear-gradient(to right, #f5f0e8, #ff6600);
        }

        .smoke {
            position: absolute;
            bottom: 100%;
            right: -20px;
            width: 8px;
            height: 8px;
            background: rgba(200,200,200,0.4);
            border-radius: 50%;
            animation: smoke-drift 3s ease-out infinite;
        }

        .smoke:nth-child(2) { animation-delay: -1s; right: -18px; }
        .smoke:nth-child(3) { animation-delay: -2s; right: -22px; }

        /* =============================================
           UI ELEMENTS
        ============================================= */

        /* Dialogue Box */
        #dialogue {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            background: rgba(15, 12, 10, 0.95);
            border: 3px solid #3d3020;
            padding: 20px;
            display: none;
            z-index: 100;
            box-shadow: 0 10px 50px rgba(0,0,0,0.8);
        }

        #dialogue.visible { display: block; }

        #dialogue .speaker {
            font-family: 'Playfair Display', serif;
            font-size: 14px;
            color: #c4a35a;
            letter-spacing: 3px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        #dialogue .text {
            font-family: 'Special Elite', monospace;
            font-size: 16px;
            color: #d4c5a9;
            line-height: 1.7;
        }

        #dialogue .continue {
            font-size: 11px;
            color: #6a5a4a;
            margin-top: 15px;
            text-align: right;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* Location Title */
        #location {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            color: #c4b494;
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 0 2px 20px rgba(0,0,0,0.8);
            opacity: 0;
            transition: opacity 1s;
            z-index: 50;
        }

        #location.visible { opacity: 1; }

        /* Navigation Arrows */
        .nav-arrow {
            position: fixed;
            width: 50px;
            height: 50px;
            background: rgba(20, 18, 15, 0.8);
            border: 2px solid #4a3a2a;
            border-radius: 50%;
            color: #a99a7a;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 50;
        }

        .nav-arrow:hover {
            background: rgba(60, 50, 40, 0.9);
            transform: scale(1.1);
        }

        .nav-arrow.left { left: 20px; top: 50%; }
        .nav-arrow.right { right: 20px; top: 50%; }

        .nav-arrow.hidden { display: none; }

        /* Film Grain */
        #grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.08;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }

        /* Vignette */
        #vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.6) 100%);
            z-index: 999;
        }

        /* Title Screen */
        #title-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0808;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: opacity 1.5s;
        }

        #title-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #title-screen h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(48px, 15vw, 140px);
            color: transparent;
            -webkit-text-stroke: 2px #c4a878;
            letter-spacing: 15px;
            margin-bottom: 30px;
            text-shadow: 0 0 80px rgba(200, 170, 120, 0.3);
        }

        #title-screen .subtitle {
            font-family: 'Special Elite', monospace;
            font-size: clamp(12px, 4vw, 20px);
            color: #5a4a3a;
            letter-spacing: 10px;
            margin-bottom: 60px;
        }

        #title-screen .prompt {
            font-family: 'Special Elite', monospace;
            font-size: 14px;
            color: #4a3a2a;
            letter-spacing: 4px;
            animation: pulse 2.5s ease-in-out infinite;
        }

        /* Year badge */
        #title-screen .year {
            position: absolute;
            bottom: 40px;
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            color: #3a2a1a;
            letter-spacing: 5px;
        }
    </style>
</head>
<body>
    <div id="game">
        <!-- STREET SCENE -->
        <div id="street-scene">
            <!-- Sky -->
            <div class="sky-layer"></div>
            <div class="moon"></div>
            <div class="cloud cloud-1"></div>
            <div class="cloud cloud-2"></div>
            <div class="cloud cloud-3"></div>

            <!-- Back buildings -->
            <div class="buildings-back"></div>
            <div class="window-light w1"></div>
            <div class="window-light w2"></div>
            <div class="window-light w3"></div>
            <div class="window-light w4"></div>
            <div class="window-light w5"></div>
            <div class="window-light w6"></div>

            <!-- Front buildings -->
            <div class="buildings-front">
                <!-- Bar -->
                <div class="storefront bar-building">
                    <div class="neon-bar">BAR</div>
                    <div class="bar-window left"></div>
                    <div class="bar-window right"></div>
                    <div class="bar-door" id="door-bar"></div>
                </div>

                <!-- Detective Office -->
                <div class="storefront office-building">
                    <div class="office-sign">NOIR INVESTIGATIONS</div>
                    <div class="office-window"></div>
                    <div class="office-door" id="door-office"></div>
                </div>

                <!-- Hotel -->
                <div class="storefront hotel-building">
                    <div class="neon-hotel">HOTEL</div>
                </div>
            </div>

            <!-- Street -->
            <div class="street">
                <div class="sidewalk"></div>
                <div class="reflection r1"></div>
                <div class="reflection r2"></div>
                <div class="reflection r3"></div>
            </div>

            <!-- Streetlamp -->
            <div class="streetlamp">
                <div class="lamp-head"></div>
                <div class="lamp-post"></div>
                <div class="lamp-glow"></div>
            </div>

            <!-- Parked car -->
            <div class="car" id="car">
                <div class="car-body"></div>
                <div class="car-windows"></div>
                <div class="car-wheel front"></div>
                <div class="car-wheel back"></div>
            </div>

            <!-- Characters -->
            <div class="detective" id="detective">
                <div class="detective-head">
                    <div class="detective-hat"></div>
                    <div class="detective-face"></div>
                </div>
                <div class="detective-body"></div>
                <div class="detective-shadow"></div>
            </div>

            <div class="femme-fatale" id="femme-fatale">
                <div class="femme-head">
                    <div class="femme-hair"></div>
                    <div class="femme-face"></div>
                </div>
                <div class="femme-body"></div>
                <div class="cigarette">
                    <div class="smoke"></div>
                    <div class="smoke"></div>
                    <div class="smoke"></div>
                </div>
            </div>
        </div>

        <!-- UI -->
        <div id="location">MAIN STREET</div>

        <div id="dialogue">
            <div class="speaker"></div>
            <div class="text"></div>
            <div class="continue">tap to continue</div>
        </div>

        <div class="nav-arrow left" id="nav-left">◀</div>
        <div class="nav-arrow right" id="nav-right">▶</div>

        <!-- Effects -->
        <div id="vignette"></div>
        <div id="grain"></div>

        <!-- Title -->
        <div id="title-screen">
            <h1>NIGHTFALL</h1>
            <div class="subtitle">A COLLAGE NOIR</div>
            <div class="prompt">TAP TO BEGIN</div>
            <div class="year">1959</div>
        </div>
    </div>

    <script>
        // Game state
        const game = {
            scene: 'street',
            dialogueQueue: [],
            dialogueIndex: 0,
            flags: {}
        };

        // Dialogue content
        const DIALOGUE = {
            femme_fatale_intro: [
                { speaker: "???", text: "You're the detective. The one they call when the police have given up." },
                { speaker: "???", text: "My name is Vivian Marlowe. My sister was found dead this morning at the Avalon Hotel." },
                { speaker: "VIVIAN", text: "Room 214. They say it was suicide. But Eleanor would never..." },
                { speaker: "VIVIAN", text: "I need you to find out what really happened. Money is no object." }
            ],
            car_look: [
                { speaker: "NARRATOR", text: "A '57 Bel Air. Chrome gleaming under the streetlight like a fresh bruise." },
                { speaker: "NARRATOR", text: "Somebody parked in a hurry. The door's not quite closed." }
            ],
            office_look: [
                { speaker: "NARRATOR", text: "NOIR INVESTIGATIONS. My name's on the door, but the paint's peeling." },
                { speaker: "NARRATOR", text: "Two months behind on rent. This case better be real." }
            ],
            bar_look: [
                { speaker: "NARRATOR", text: "The Blue Moon. Where secrets go to drown." },
                { speaker: "NARRATOR", text: "Mickey the bartender knows everyone's business. Might be worth a visit." }
            ]
        };

        // DOM elements
        const titleScreen = document.getElementById('title-screen');
        const dialogueBox = document.getElementById('dialogue');
        const locationEl = document.getElementById('location');

        // Start game
        titleScreen.addEventListener('click', () => {
            titleScreen.classList.add('hidden');
            showLocation('MAIN STREET');

            // Intro after brief pause
            setTimeout(() => {
                startDialogue('femme_fatale_intro');
                document.getElementById('femme-fatale').classList.add('talking');
            }, 1500);
        });

        // Show location name
        function showLocation(name) {
            locationEl.textContent = name;
            locationEl.classList.add('visible');
            setTimeout(() => locationEl.classList.remove('visible'), 3000);
        }

        // Dialogue system
        function startDialogue(key) {
            game.dialogueQueue = DIALOGUE[key] || [];
            game.dialogueIndex = 0;
            showNextDialogue();
        }

        function showNextDialogue() {
            if (game.dialogueIndex >= game.dialogueQueue.length) {
                closeDialogue();
                return;
            }

            const line = game.dialogueQueue[game.dialogueIndex];
            dialogueBox.querySelector('.speaker').textContent = line.speaker;
            dialogueBox.querySelector('.text').textContent = line.text;
            dialogueBox.classList.add('visible');
        }

        function closeDialogue() {
            dialogueBox.classList.remove('visible');
            game.dialogueQueue = [];
            game.dialogueIndex = 0;
            document.getElementById('femme-fatale').classList.remove('talking');
        }

        // Click dialogue to advance
        dialogueBox.addEventListener('click', (e) => {
            e.stopPropagation();
            game.dialogueIndex++;
            showNextDialogue();
        });

        // Interactive elements
        document.getElementById('femme-fatale').addEventListener('click', () => {
            if (!game.flags.met_vivian) {
                startDialogue('femme_fatale_intro');
                game.flags.met_vivian = true;
            }
        });

        document.getElementById('car').addEventListener('click', () => {
            startDialogue('car_look');
        });

        document.getElementById('door-office').addEventListener('click', () => {
            startDialogue('office_look');
        });

        document.getElementById('door-bar').addEventListener('click', () => {
            startDialogue('bar_look');
        });

        // Keyboard
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ' || e.key === 'Enter') {
                if (dialogueBox.classList.contains('visible')) {
                    game.dialogueIndex++;
                    showNextDialogue();
                }
            }
            if (e.key === 'Escape') {
                closeDialogue();
            }
        });

        // Touch anywhere to close dialogue if open
        document.getElementById('game').addEventListener('click', (e) => {
            if (e.target.id === 'game' || e.target.id === 'street-scene') {
                if (dialogueBox.classList.contains('visible')) {
                    game.dialogueIndex++;
                    showNextDialogue();
                }
            }
        });
    </script>
</body>
</html>
