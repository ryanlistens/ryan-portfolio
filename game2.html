<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mullet Pro</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }
body {
    background: #f5f2ec;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: Arial, sans-serif;
    padding: 20px;
}
#game-frame {
    background: #4d443d;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    max-width: 750px;
    width: 100%;
}
#hud {
    display: flex;
    justify-content: space-between;
    padding: 12px 20px;
    background: #2b2b2b;
    color: #f5f2ec;
    font-size: 18px;
    border-radius: 6px;
    margin-bottom: 15px;
    font-weight: bold;
}
.heart { color: #e74c3c; font-size: 20px; }
canvas {
    display: block;
    border: 4px solid #2b2b2b;
    border-radius: 6px;
    width: 100%;
    background: #e8e6dc;
}
</style>
</head>
<body>

<div id="game-frame">
    <div id="hud">
        <span>LEVEL <span id="level">1</span></span>
        <span>SCORE <span id="score">0</span></span>
        <span><span id="timer">60</span>s</span>
        <span id="lives"></span>
    </div>
    <canvas id="game" width="700" height="500"></canvas>
    <button id="start-btn" onclick="startGame()">START GAME</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let state = "menu",
    level = 1,
    score = 0,
    timer = 60,
    lives = 2,
    frame = 0,
    cardTimer = 0,
    menuChoice = 0;

let player = { x: 350, y: 380, holding: null };
let computer = { x: 120, y: 320 };
let ui = { show: false, selectedColor: 0, confirming: false };
let npcs = [];
let cracks = [];
let keys = {};

const COLORS = [
    { name: "RED", hex: "#e74c3c" },
    { name: "GREEN", hex: "#27ae60" },
    { name: "BLUE", hex: "#005f99" },
    { name: "YELLOW", hex: "#f39c12" }
];

function updateLives() {
    let html = "";
    for (let i = 0; i < lives; i++) html += "<span class='heart'>♥</span>";
    for (let i = lives; i < 2; i++) html += "<span class='heart' style='opacity:0.3'>♥</span>";
    document.getElementById("lives").innerHTML = html;
}

function drawMulletPro(x, y) {
    const s = 2;
    ctx.fillStyle = "rgba(0,0,0,0.3)";
    ctx.beginPath();
    ctx.ellipse(x, y + 36, 12, 4, 0, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#3a2a1a";
    ctx.fillRect(x - 7*s, y - 16*s, 14*s, 4*s);
}

function drawNPC(npc) {
    const x = npc.x, y = npc.y, s = 2;
    ctx.fillStyle = npc.color.hex;
    ctx.fillRect(x - 6*s, y - 16*s, 12*s, 4*s);
}

function drawScene() {

    if (state === "menu") {
        ctx.fillStyle = "#1a1a2e";
        ctx.fillRect(0, 0, 700, 500);
        ctx.font = "bold 72px Arial";
        ctx.textAlign = "center";
        ctx.fillStyle = "#ffd700";
        ctx.fillText("MULLET PRO", 350, 150);
        drawMulletPro(350, 340);
        return;
    }

    if (state === "levelCard") {
        ctx.fillStyle = "#1a1a2e";
        ctx.fillRect(0, 0, 700, 500);
        ctx.font = "bold 80px Arial";
        ctx.fillStyle = "#ffd700";
        ctx.textAlign = "center";
        ctx.fillText("LEVEL " + level, 350, 200);
        return;
    }

    if (state === "over" || state === "win") {
        ctx.fillStyle = "#1a1a2e";
        ctx.fillRect(0, 0, 700, 500);
        ctx.font = "bold 56px Arial";
        ctx.fillStyle = state === "win" ? "#27ae60" : "#e74c3c";
        ctx.textAlign = "center";
        ctx.fillText(state === "win" ? "YOU'RE HIRED!" : "YOU'RE FIRED!", 350, 180);
        return;
    }

    ctx.fillStyle = "#e8e6dc";
    ctx.fillRect(0, 0, 700, 500);

    for (let npc of npcs) drawNPC(npc);
    drawMulletPro(player.x, player.y);
}<script>
function spawnNPCs() {
    npcs = [];
    for (let i = 0; i < level + 1; i++) {
        const color = COLORS[Math.floor(Math.random() * COLORS.length)];
        npcs.push({
            x: 200 + i * 120,
            y: 260,
            color,
            state: "waiting",
            timer: 0
        });
    }
}

function startGame() {
    state = "levelCard";
    level = 1;
    score = 0;
    lives = 2;
    timer = 60;
    frame = 0;
    spawnNPCs();
    updateLives();
    document.getElementById("score").textContent = score;
    document.getElementById("level").textContent = level;
}

function nextLevel() {
    level++;
    if (level > 5) {
        state = "win";
        return;
    }
    timer = 60;
    spawnNPCs();
    state = "levelCard";
    document.getElementById("level").textContent = level;
}

function update() {
    frame++;

    if (state === "levelCard") {
        cardTimer++;
        if (cardTimer > 90) {
            cardTimer = 0;
            state = "playing";
        }
        return;
    }

    if (state !== "playing") return;

    timer -= 1 / 60;
    document.getElementById("timer").textContent = Math.ceil(timer);

    if (timer <= 0) {
        lives--;
        updateLives();
        if (lives <= 0) {
            state = "over";
        } else {
            timer = 60;
        }
    }

    for (let npc of npcs) {
        npc.timer++;
        if (npc.timer > 180 && npc.state === "waiting") {
            npc.state = "fixing";
            npc.timer = 0;
        }
        if (npc.state === "fixing" && npc.timer > 120) {
            npc.state = "waiting";
            npc.timer = 0;
            score += 10;
            document.getElementById("score").textContent = score;
        }
    }

    if (score >= level * 50) {
        nextLevel();
    }
}

function gameLoop() {
    update();
    drawScene();
    requestAnimationFrame(gameLoop);
}

document.addEventListener("keydown", e => {
    keys[e.key] = true;
});

document.addEventListener("keyup", e => {
    keys[e.key] = false;
});

updateLives();
gameLoop();
</script>

</body>
</html>
